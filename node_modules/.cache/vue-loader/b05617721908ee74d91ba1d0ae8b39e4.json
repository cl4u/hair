{"remainingRequest":"D:\\project\\haircut\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\haircut\\src\\views\\memberCenter.vue?vue&type=style&index=0&id=0757b529&lang=scss&scoped=scoped&","dependencies":[{"path":"D:\\project\\haircut\\src\\views\\memberCenter.vue","mtime":1607335440964},{"path":"D:\\project\\haircut\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\haircut\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\project\\haircut\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\project\\haircut\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\haircut\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\haircut\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubWVtYmVyQ2VudGVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogIHBhZGRpbmc6IDIwcHg7Cn0K"},{"version":3,"sources":["memberCenter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;AACA;AACA","file":"memberCenter.vue","sourceRoot":"src/views","sourcesContent":["<!--\n * @Description: \n * @Author: rk\n * @Date: 2020-11-09 14:55:41\n-->\n<template>\n  <div class=\"memberCenter\">\n    <a-form layout=\"inline\">\n      <a-row type=\"flex\" justify=\"space-between\">\n        <a-col>\n          <a-form-item>\n            <a-input\n              style=\"width: 200px\"\n              placeholder=\"可通过手机号进行搜索\"\n              v-model.trim=\"telephone\"\n              allowClear\n            ></a-input>\n          </a-form-item>\n          <a-form-item>\n            <a-button type=\"primary\" @click=\"getTableData(false)\"\n              >搜索</a-button\n            >\n          </a-form-item>\n        </a-col>\n        <a-col>\n          <a-form-item>\n            <a-button type=\"primary\" @click=\"add\">添加用户</a-button>\n          </a-form-item>\n        </a-col>\n      </a-row>\n    </a-form>\n    <a-table\n      bordered\n      :dataSource=\"tableData\"\n      :columns=\"tableColumns\"\n      :loading=\"pageTableLoading\"\n      :pagination=\"false\"\n      style=\"margin: 15px 0\"\n      :scroll=\"{ x: tableScrollWidth, y: tableScrollHeight }\"\n      size=\"small\"\n    >\n      <template slot-scope=\"text, record\" slot=\"operation\">\n        <a-button\n          type=\"primary\"\n          size=\"small\"\n          @click=\"recharge(record.member_id)\"\n          >充值</a-button\n        >\n        <a-button\n          type=\"primary\"\n          size=\"small\"\n          style=\"margin: 0 15px\"\n          @click=\"chargeback(record)\"\n          >扣款</a-button\n        >\n        <a-button type=\"primary\" size=\"small\" @click=\"edit(record)\"\n          >编辑</a-button\n        >\n      </template>\n    </a-table>\n    <pagination\n      :totalCount=\"totalCount\"\n      :pageSize=\"pageSize\"\n      :tableView=\"tableView\"\n      :defaultData=\"defaultData\"\n      @tables=\"tables\"\n    ></pagination>\n    <addUser :data=\"addDialog\"></addUser>\n    <editUser :data=\"editDialog\" :modifyObj=\"modifyObj\"></editUser>\n    <recharge :data=\"rechargeDialog\"></recharge>\n    <chargeback :data=\"chargebackDialog\"></chargeback>\n  </div>\n</template>\n<script>\n// 常量\nimport constant from \"@/constant/memberCenter.js\";\n// 组件\nimport addUser from \"@/components/addUser.vue\";\nimport editUser from \"@/components/editUser.vue\";\nimport recharge from \"@/components/recharge.vue\";\nimport chargeback from \"@/components/chargeback.vue\";\nimport pagination from '../components/pagination.vue';\nexport default {\n  name: \"memberCenter\",\n  components: { addUser, editUser, recharge, chargeback,pagination },\n  data() {\n    return {\n      totalCount: 0, // totalCount 这是传递给 分页组件的 total 从而显示多少页数\n      pageSize: 15, // 这是每页表格最多显示多少条\n      tableView: [], //这个是给表格显示的数据\n      defaultData: false, //例如用户在第5页，增加后请求数据肯定子啊第1页面那么需要重置组件\n      telephone: \"\",\n      tableData: [], //表格数据\n      tableColumns: constant.pageTableColumns, //表格表头\n      pageTableLoading: false, //表格loading\n      addDialog: {\n        isShow: false,\n      },\n      editDialog: {\n        isShow: false,\n      },\n      rechargeDialog: {\n        isShow: false,\n      },\n      chargebackDialog: {\n        isShow: false,\n      },\n      modifyObj: {},\n      merchant_text: [\"洗发\", \"剪发\", \"染发\", \"烫发\"],\n      memberList: [],\n    };\n  },\n  mounted() {\n    this.getTableData(false);\n  },\n  computed: {\n    //表格宽度\n    tableScrollWidth() {\n      let length = 0;\n      for (let j = 0; j < this.tableColumns.length; j++) {\n        length += this.tableColumns[j].width;\n      }\n      return length;\n    },\n    // 表格高度\n    tableScrollHeight() {\n      let clientHeight =\n        document.body.clientHeight || document.documentElement.clientHeight;\n      return clientHeight - 360;\n    },\n  },\n  methods: {\n    tables(table) {\n      this.tableData = table;\n    },\n    // 获取表格数据\n    getTableData(paginationFlag) {\n      let self = this,\n        params = { telephone: this.telephone };\n      this.pageTableLoading = true;\n      this.tableData = [];\n      this.$axios\n        .post(\"http://localhost:3000/api/Stu/search\", params)\n        .then((res) => {\n          self.pageTableLoading = false;\n          if (res.status == 200) {\n            if (res.data && res.data.length > 0) {\n              self.defaultData = true\n              for (let i = 0; i < res.data.length; i++) {\n                self.tableView = res.data;\n                const element = res.data[i];\n                element.key = (i + 1).toString();\n                element.merchant_type = self.merchant_text[element.type - 1];\n                element.date = element.date\n                  ? self.formatDateTime(element.date)\n                  : \"\";\n                self.memberList.push(element.telephone);\n              }\n              self.totalCount = res.data.length;\n              if (res.data.length >= self.pageSize) {\n                for (let i = 0; i < self.pageSize; i++) {\n                  self.tableData.push(res.data[i]);\n                }\n              } else {\n                self.tableData = res.data;\n              }\n            }\n          }\n        });\n    },\n    formatDateTime(date) {\n      date = new Date(date);\n      var y = date.getFullYear();\n      var m = date.getMonth() + 1;\n      m = m < 10 ? \"0\" + m : m;\n      var d = date.getDate();\n      d = d < 10 ? \"0\" + d : d;\n      var h = date.getHours();\n      h = h < 10 ? \"0\" + h : h;\n      var minute = date.getMinutes();\n      minute = minute < 10 ? \"0\" + minute : minute;\n      var second = date.getSeconds();\n      second = second < 10 ? \"0\" + second : second;\n      return y + \"-\" + m + \"-\" + d + \" \" + h + \":\" + minute + \":\" + second;\n    },\n    recharge(id) {\n      this.rechargeDialog = {\n        isShow: true,\n        member_id: id,\n      };\n    },\n    chargeback(data) {\n      this.chargebackDialog = {\n        isShow: true,\n        member_id: data.member_id,\n        type: data.type,\n        money: data.balance,\n      };\n    },\n    add() {\n      this.addDialog = {\n        isShow: true,\n        list: this.memberList,\n      };\n    },\n    edit(data) {\n      this.editDialog = {\n        isShow: true,\n      };\n      this.modifyObj = JSON.parse(JSON.stringify(data));\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped='scoped'>\n.memberCenter {\n  background-color: #ffffff;\n  padding: 20px;\n}\n</style>"]}]}